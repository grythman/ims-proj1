{"ast":null,"code":"var _jsxFileName = \"/home/grythman/ims-proj/frontend/src/pages/notifications/NotificationDetailPage.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { toast } from 'react-hot-toast';\nimport { ArrowLeft } from 'lucide-react';\nimport NotificationDetail from '../../components/Notifications/NotificationDetail';\nimport api from '../../services/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst NotificationDetailPage = () => {\n  _s();\n  var _notification$related;\n  const {\n    id\n  } = useParams();\n  const navigate = useNavigate();\n  const [notification, setNotification] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  useEffect(() => {\n    fetchNotification();\n  }, [id]);\n  const fetchNotification = async () => {\n    try {\n      const response = await api.get(`/api/notifications/${id}/`);\n      setNotification(response.data);\n    } catch (error) {\n      var _error$response, _error$response$data, _error$response2, _error$response2$data;\n      console.error('Error fetching notification:', error);\n      const errorMessage = ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.error) || ((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.message) || 'Failed to load notification';\n      setError(errorMessage);\n      toast.error(errorMessage);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleMarkAsRead = async () => {\n    try {\n      await api.post(`/api/notifications/${id}/read/`);\n      setNotification(prev => ({\n        ...prev,\n        is_read: true\n      }));\n      toast.success('Notification marked as read');\n    } catch (error) {\n      console.error('Error marking notification as read:', error);\n      toast.error('Failed to mark notification as read');\n    }\n  };\n  const handleClose = () => {\n    navigate(-1);\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-center min-h-screen\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this);\n  }\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-col items-center justify-center min-h-screen\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-red-500 mb-4\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => navigate(-1),\n        className: \"text-emerald-600 hover:text-emerald-700\",\n        children: \"Go Back\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 py-8\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-8\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => navigate(-1),\n        className: \"flex items-center text-emerald-600 hover:text-emerald-700\",\n        children: [/*#__PURE__*/_jsxDEV(ArrowLeft, {\n          className: \"h-5 w-5 mr-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 11\n        }, this), \"Back to Notifications\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this), notification && /*#__PURE__*/_jsxDEV(NotificationDetail, {\n      notification: notification,\n      onClose: handleClose,\n      onMarkAsRead: !notification.is_read ? handleMarkAsRead : undefined\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 9\n    }, this), (notification === null || notification === void 0 ? void 0 : (_notification$related = notification.related_notifications) === null || _notification$related === void 0 ? void 0 : _notification$related.length) > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-8\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-lg font-medium text-gray-900 mb-4\",\n        children: \"Related Notifications\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-4\",\n        children: notification.related_notifications.map(relatedNotification => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white rounded-lg shadow p-4 hover:shadow-md transition-shadow\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"text-sm font-medium text-gray-900\",\n            children: relatedNotification.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mt-1 text-sm text-gray-500\",\n            children: relatedNotification.message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => navigate(`/notifications/${relatedNotification.id}`),\n            className: \"mt-2 text-sm text-emerald-600 hover:text-emerald-700\",\n            children: \"View Details\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 17\n          }, this)]\n        }, relatedNotification.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 5\n  }, this);\n};\n_s(NotificationDetailPage, \"uGLGw9NcEGqE6QlP217aVNSbRSk=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = NotificationDetailPage;\nexport default NotificationDetailPage;\nvar _c;\n$RefreshReg$(_c, \"NotificationDetailPage\");","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","toast","ArrowLeft","NotificationDetail","api","jsxDEV","_jsxDEV","NotificationDetailPage","_s","_notification$related","id","navigate","notification","setNotification","loading","setLoading","error","setError","fetchNotification","response","get","data","_error$response","_error$response$data","_error$response2","_error$response2$data","console","errorMessage","message","handleMarkAsRead","post","prev","is_read","success","handleClose","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","onClose","onMarkAsRead","undefined","related_notifications","length","map","relatedNotification","title","_c","$RefreshReg$"],"sources":["/home/grythman/ims-proj/frontend/src/pages/notifications/NotificationDetailPage.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { toast } from 'react-hot-toast';\nimport { ArrowLeft } from 'lucide-react';\nimport NotificationDetail from '../../components/Notifications/NotificationDetail';\nimport api from '../../services/api';\n\nconst NotificationDetailPage = () => {\n  const { id } = useParams();\n  const navigate = useNavigate();\n  const [notification, setNotification] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    fetchNotification();\n  }, [id]);\n\n  const fetchNotification = async () => {\n    try {\n      const response = await api.get(`/api/notifications/${id}/`);\n      setNotification(response.data);\n    } catch (error) {\n      console.error('Error fetching notification:', error);\n      const errorMessage = error.response?.data?.error || \n                          error.response?.data?.message ||\n                          'Failed to load notification';\n      setError(errorMessage);\n      toast.error(errorMessage);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleMarkAsRead = async () => {\n    try {\n      await api.post(`/api/notifications/${id}/read/`);\n      setNotification(prev => ({\n        ...prev,\n        is_read: true\n      }));\n      toast.success('Notification marked as read');\n    } catch (error) {\n      console.error('Error marking notification as read:', error);\n      toast.error('Failed to mark notification as read');\n    }\n  };\n\n  const handleClose = () => {\n    navigate(-1);\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500\"></div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"flex flex-col items-center justify-center min-h-screen\">\n        <div className=\"text-red-500 mb-4\">{error}</div>\n        <button\n          onClick={() => navigate(-1)}\n          className=\"text-emerald-600 hover:text-emerald-700\"\n        >\n          Go Back\n        </button>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n      {/* Back Button */}\n      <div className=\"mb-8\">\n        <button\n          onClick={() => navigate(-1)}\n          className=\"flex items-center text-emerald-600 hover:text-emerald-700\"\n        >\n          <ArrowLeft className=\"h-5 w-5 mr-2\" />\n          Back to Notifications\n        </button>\n      </div>\n\n      {/* Notification Detail */}\n      {notification && (\n        <NotificationDetail\n          notification={notification}\n          onClose={handleClose}\n          onMarkAsRead={!notification.is_read ? handleMarkAsRead : undefined}\n        />\n      )}\n\n      {/* Related Notifications */}\n      {notification?.related_notifications?.length > 0 && (\n        <div className=\"mt-8\">\n          <h3 className=\"text-lg font-medium text-gray-900 mb-4\">\n            Related Notifications\n          </h3>\n          <div className=\"space-y-4\">\n            {notification.related_notifications.map(relatedNotification => (\n              <div\n                key={relatedNotification.id}\n                className=\"bg-white rounded-lg shadow p-4 hover:shadow-md transition-shadow\"\n              >\n                <h4 className=\"text-sm font-medium text-gray-900\">\n                  {relatedNotification.title}\n                </h4>\n                <p className=\"mt-1 text-sm text-gray-500\">\n                  {relatedNotification.message}\n                </p>\n                <button\n                  onClick={() => navigate(`/notifications/${relatedNotification.id}`)}\n                  className=\"mt-2 text-sm text-emerald-600 hover:text-emerald-700\"\n                >\n                  View Details\n                </button>\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default NotificationDetailPage; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}