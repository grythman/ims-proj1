{"ast":null,"code":"import React,{useState}from'react';import{useNavigate,Link}from'react-router-dom';import{useAuth}from'../../context/AuthContext';import{Button}from'../../components/UI/Button';import{Card,CardContent,CardHeader,CardTitle}from'../../components/UI/Card';import{toast}from'react-hot-toast';import{UserCircle,Lock}from'lucide-react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Login=()=>{const[credentials,setCredentials]=useState({username:'',password:''});const[loading,setLoading]=useState(false);const navigate=useNavigate();const{login}=useAuth();const handleChange=e=>{const{name,value}=e.target;setCredentials(prev=>({...prev,[name]:value}));};const handleSubmit=async event=>{event.preventDefault();setLoading(true);try{if(!credentials.username||!credentials.password){toast.error('Please enter both username and password');return;}const data=await login(credentials.username,credentials.password);console.log('Login successful:',data);// Store user data\nif(data.user){localStorage.setItem('user',JSON.stringify(data.user));}navigate('/dashboard');}catch(error){var _error$response,_error$response$data;console.error('Login error:',error);const errorMessage=((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.error)||'Login failed. Please check your credentials.';toast.error(errorMessage);}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-100 flex flex-col justify-center py-12 sm:px-6 lg:px-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"sm:mx-auto sm:w-full sm:max-w-md\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"mt-6 text-center text-3xl font-extrabold text-gray-900\",children:\"Sign in to your account\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"mt-2 text-center text-sm text-gray-600\",children:[\"Or\",' ',/*#__PURE__*/_jsx(Link,{to:\"/register\",className:\"font-medium text-emerald-600 hover:text-emerald-500\",children:\"create a new account\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-8 sm:mx-auto sm:w-full sm:max-w-md\",children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(CardContent,{children:/*#__PURE__*/_jsxs(\"form\",{className:\"space-y-6\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"username\",className:\"block text-sm font-medium text-gray-700\",children:\"Username\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-1 relative rounded-md shadow-sm\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\",children:/*#__PURE__*/_jsx(UserCircle,{className:\"h-5 w-5 text-gray-400\"})}),/*#__PURE__*/_jsx(\"input\",{id:\"username\",name:\"username\",type:\"text\",required:true,value:credentials.username,onChange:handleChange,className:\"block w-full pl-10 sm:text-sm border-gray-300 rounded-md focus:ring-emerald-500 focus:border-emerald-500\",placeholder:\"Enter your username\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",className:\"block text-sm font-medium text-gray-700\",children:\"Password\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-1 relative rounded-md shadow-sm\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\",children:/*#__PURE__*/_jsx(Lock,{className:\"h-5 w-5 text-gray-400\"})}),/*#__PURE__*/_jsx(\"input\",{id:\"password\",name:\"password\",type:\"password\",required:true,value:credentials.password,onChange:handleChange,className:\"block w-full pl-10 sm:text-sm border-gray-300 rounded-md focus:ring-emerald-500 focus:border-emerald-500\",placeholder:\"Enter your password\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{id:\"remember-me\",name:\"remember-me\",type:\"checkbox\",className:\"h-4 w-4 text-emerald-600 focus:ring-emerald-500 border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"remember-me\",className:\"ml-2 block text-sm text-gray-900\",children:\"Remember me\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm\",children:/*#__PURE__*/_jsx(Link,{to:\"/forgot-password\",className:\"font-medium text-emerald-600 hover:text-emerald-500\",children:\"Forgot your password?\"})})]}),/*#__PURE__*/_jsx(Button,{type:\"submit\",className:\"w-full\",disabled:loading,loading:loading,children:loading?'Signing in...':'Sign in'})]})})})})]});};export default Login;","map":{"version":3,"names":["React","useState","useNavigate","Link","useAuth","Button","Card","CardContent","CardHeader","CardTitle","toast","UserCircle","Lock","jsx","_jsx","jsxs","_jsxs","Login","credentials","setCredentials","username","password","loading","setLoading","navigate","login","handleChange","e","name","value","target","prev","handleSubmit","event","preventDefault","error","data","console","log","user","localStorage","setItem","JSON","stringify","_error$response","_error$response$data","errorMessage","response","className","children","to","onSubmit","htmlFor","id","type","required","onChange","placeholder","disabled"],"sources":["C:/Users/Admin/ims-proj/frontend/src/pages/auth/Login.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { useNavigate, Link } from 'react-router-dom';\nimport { useAuth } from '../../context/AuthContext';\nimport { Button } from '../../components/UI/Button';\nimport { Card, CardContent, CardHeader, CardTitle } from '../../components/UI/Card';\nimport { toast } from 'react-hot-toast';\nimport { UserCircle, Lock } from 'lucide-react';\n\nconst Login = () => {\n  const [credentials, setCredentials] = useState({\n    username: '',\n    password: '',\n  });\n  const [loading, setLoading] = useState(false);\n  const navigate = useNavigate();\n  const { login } = useAuth();\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setCredentials(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n\n  const handleSubmit = async (event) => {\n    event.preventDefault();\n    setLoading(true);\n    \n    try {\n        if (!credentials.username || !credentials.password) {\n            toast.error('Please enter both username and password');\n            return;\n        }\n        \n        const data = await login(credentials.username, credentials.password);\n        console.log('Login successful:', data);\n        \n        // Store user data\n        if (data.user) {\n            localStorage.setItem('user', JSON.stringify(data.user));\n        }\n        \n        navigate('/dashboard');\n    } catch (error) {\n        console.error('Login error:', error);\n        const errorMessage = error.response?.data?.error || 'Login failed. Please check your credentials.';\n        toast.error(errorMessage);\n    } finally {\n        setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-100 flex flex-col justify-center py-12 sm:px-6 lg:px-8\">\n      <div className=\"sm:mx-auto sm:w-full sm:max-w-md\">\n        <h2 className=\"mt-6 text-center text-3xl font-extrabold text-gray-900\">\n          Sign in to your account\n        </h2>\n        <p className=\"mt-2 text-center text-sm text-gray-600\">\n          Or{' '}\n          <Link \n            to=\"/register\" \n            className=\"font-medium text-emerald-600 hover:text-emerald-500\"\n          >\n            create a new account\n          </Link>\n        </p>\n      </div>\n\n      <div className=\"mt-8 sm:mx-auto sm:w-full sm:max-w-md\">\n        <Card>\n          <CardContent>\n            <form className=\"space-y-6\" onSubmit={handleSubmit}>\n              <div>\n                <label \n                  htmlFor=\"username\" \n                  className=\"block text-sm font-medium text-gray-700\"\n                >\n                  Username\n                </label>\n                <div className=\"mt-1 relative rounded-md shadow-sm\">\n                  <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n                    <UserCircle className=\"h-5 w-5 text-gray-400\" />\n                  </div>\n                  <input\n                    id=\"username\"\n                    name=\"username\"\n                    type=\"text\"\n                    required\n                    value={credentials.username}\n                    onChange={handleChange}\n                    className=\"block w-full pl-10 sm:text-sm border-gray-300 rounded-md focus:ring-emerald-500 focus:border-emerald-500\"\n                    placeholder=\"Enter your username\"\n                  />\n                </div>\n              </div>\n\n              <div>\n                <label \n                  htmlFor=\"password\" \n                  className=\"block text-sm font-medium text-gray-700\"\n                >\n                  Password\n                </label>\n                <div className=\"mt-1 relative rounded-md shadow-sm\">\n                  <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n                    <Lock className=\"h-5 w-5 text-gray-400\" />\n                  </div>\n                  <input\n                    id=\"password\"\n                    name=\"password\"\n                    type=\"password\"\n                    required\n                    value={credentials.password}\n                    onChange={handleChange}\n                    className=\"block w-full pl-10 sm:text-sm border-gray-300 rounded-md focus:ring-emerald-500 focus:border-emerald-500\"\n                    placeholder=\"Enter your password\"\n                  />\n                </div>\n              </div>\n\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center\">\n                  <input\n                    id=\"remember-me\"\n                    name=\"remember-me\"\n                    type=\"checkbox\"\n                    className=\"h-4 w-4 text-emerald-600 focus:ring-emerald-500 border-gray-300 rounded\"\n                  />\n                  <label \n                    htmlFor=\"remember-me\" \n                    className=\"ml-2 block text-sm text-gray-900\"\n                  >\n                    Remember me\n                  </label>\n                </div>\n\n                <div className=\"text-sm\">\n                  <Link\n                    to=\"/forgot-password\"\n                    className=\"font-medium text-emerald-600 hover:text-emerald-500\"\n                  >\n                    Forgot your password?\n                  </Link>\n                </div>\n              </div>\n\n              <Button\n                type=\"submit\"\n                className=\"w-full\"\n                disabled={loading}\n                loading={loading}\n              >\n                {loading ? 'Signing in...' : 'Sign in'}\n              </Button>\n            </form>\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  );\n};\n\nexport default Login; "],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,OAASC,WAAW,CAAEC,IAAI,KAAQ,kBAAkB,CACpD,OAASC,OAAO,KAAQ,2BAA2B,CACnD,OAASC,MAAM,KAAQ,4BAA4B,CACnD,OAASC,IAAI,CAAEC,WAAW,CAAEC,UAAU,CAAEC,SAAS,KAAQ,0BAA0B,CACnF,OAASC,KAAK,KAAQ,iBAAiB,CACvC,OAASC,UAAU,CAAEC,IAAI,KAAQ,cAAc,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEhD,KAAM,CAAAC,KAAK,CAAGA,CAAA,GAAM,CAClB,KAAM,CAACC,WAAW,CAAEC,cAAc,CAAC,CAAGlB,QAAQ,CAAC,CAC7CmB,QAAQ,CAAE,EAAE,CACZC,QAAQ,CAAE,EACZ,CAAC,CAAC,CACF,KAAM,CAACC,OAAO,CAAEC,UAAU,CAAC,CAAGtB,QAAQ,CAAC,KAAK,CAAC,CAC7C,KAAM,CAAAuB,QAAQ,CAAGtB,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAEuB,KAAM,CAAC,CAAGrB,OAAO,CAAC,CAAC,CAE3B,KAAM,CAAAsB,YAAY,CAAIC,CAAC,EAAK,CAC1B,KAAM,CAAEC,IAAI,CAAEC,KAAM,CAAC,CAAGF,CAAC,CAACG,MAAM,CAChCX,cAAc,CAACY,IAAI,GAAK,CACtB,GAAGA,IAAI,CACP,CAACH,IAAI,EAAGC,KACV,CAAC,CAAC,CAAC,CACL,CAAC,CAED,KAAM,CAAAG,YAAY,CAAG,KAAO,CAAAC,KAAK,EAAK,CACpCA,KAAK,CAACC,cAAc,CAAC,CAAC,CACtBX,UAAU,CAAC,IAAI,CAAC,CAEhB,GAAI,CACA,GAAI,CAACL,WAAW,CAACE,QAAQ,EAAI,CAACF,WAAW,CAACG,QAAQ,CAAE,CAChDX,KAAK,CAACyB,KAAK,CAAC,yCAAyC,CAAC,CACtD,OACJ,CAEA,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAX,KAAK,CAACP,WAAW,CAACE,QAAQ,CAAEF,WAAW,CAACG,QAAQ,CAAC,CACpEgB,OAAO,CAACC,GAAG,CAAC,mBAAmB,CAAEF,IAAI,CAAC,CAEtC;AACA,GAAIA,IAAI,CAACG,IAAI,CAAE,CACXC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAEC,IAAI,CAACC,SAAS,CAACP,IAAI,CAACG,IAAI,CAAC,CAAC,CAC3D,CAEAf,QAAQ,CAAC,YAAY,CAAC,CAC1B,CAAE,MAAOW,KAAK,CAAE,KAAAS,eAAA,CAAAC,oBAAA,CACZR,OAAO,CAACF,KAAK,CAAC,cAAc,CAAEA,KAAK,CAAC,CACpC,KAAM,CAAAW,YAAY,CAAG,EAAAF,eAAA,CAAAT,KAAK,CAACY,QAAQ,UAAAH,eAAA,kBAAAC,oBAAA,CAAdD,eAAA,CAAgBR,IAAI,UAAAS,oBAAA,iBAApBA,oBAAA,CAAsBV,KAAK,GAAI,8CAA8C,CAClGzB,KAAK,CAACyB,KAAK,CAACW,YAAY,CAAC,CAC7B,CAAC,OAAS,CACNvB,UAAU,CAAC,KAAK,CAAC,CACrB,CACF,CAAC,CAED,mBACEP,KAAA,QAAKgC,SAAS,CAAC,6EAA6E,CAAAC,QAAA,eAC1FjC,KAAA,QAAKgC,SAAS,CAAC,kCAAkC,CAAAC,QAAA,eAC/CnC,IAAA,OAAIkC,SAAS,CAAC,wDAAwD,CAAAC,QAAA,CAAC,yBAEvE,CAAI,CAAC,cACLjC,KAAA,MAAGgC,SAAS,CAAC,wCAAwC,CAAAC,QAAA,EAAC,IAClD,CAAC,GAAG,cACNnC,IAAA,CAACX,IAAI,EACH+C,EAAE,CAAC,WAAW,CACdF,SAAS,CAAC,qDAAqD,CAAAC,QAAA,CAChE,sBAED,CAAM,CAAC,EACN,CAAC,EACD,CAAC,cAENnC,IAAA,QAAKkC,SAAS,CAAC,uCAAuC,CAAAC,QAAA,cACpDnC,IAAA,CAACR,IAAI,EAAA2C,QAAA,cACHnC,IAAA,CAACP,WAAW,EAAA0C,QAAA,cACVjC,KAAA,SAAMgC,SAAS,CAAC,WAAW,CAACG,QAAQ,CAAEnB,YAAa,CAAAiB,QAAA,eACjDjC,KAAA,QAAAiC,QAAA,eACEnC,IAAA,UACEsC,OAAO,CAAC,UAAU,CAClBJ,SAAS,CAAC,yCAAyC,CAAAC,QAAA,CACpD,UAED,CAAO,CAAC,cACRjC,KAAA,QAAKgC,SAAS,CAAC,oCAAoC,CAAAC,QAAA,eACjDnC,IAAA,QAAKkC,SAAS,CAAC,sEAAsE,CAAAC,QAAA,cACnFnC,IAAA,CAACH,UAAU,EAACqC,SAAS,CAAC,uBAAuB,CAAE,CAAC,CAC7C,CAAC,cACNlC,IAAA,UACEuC,EAAE,CAAC,UAAU,CACbzB,IAAI,CAAC,UAAU,CACf0B,IAAI,CAAC,MAAM,CACXC,QAAQ,MACR1B,KAAK,CAAEX,WAAW,CAACE,QAAS,CAC5BoC,QAAQ,CAAE9B,YAAa,CACvBsB,SAAS,CAAC,0GAA0G,CACpHS,WAAW,CAAC,qBAAqB,CAClC,CAAC,EACC,CAAC,EACH,CAAC,cAENzC,KAAA,QAAAiC,QAAA,eACEnC,IAAA,UACEsC,OAAO,CAAC,UAAU,CAClBJ,SAAS,CAAC,yCAAyC,CAAAC,QAAA,CACpD,UAED,CAAO,CAAC,cACRjC,KAAA,QAAKgC,SAAS,CAAC,oCAAoC,CAAAC,QAAA,eACjDnC,IAAA,QAAKkC,SAAS,CAAC,sEAAsE,CAAAC,QAAA,cACnFnC,IAAA,CAACF,IAAI,EAACoC,SAAS,CAAC,uBAAuB,CAAE,CAAC,CACvC,CAAC,cACNlC,IAAA,UACEuC,EAAE,CAAC,UAAU,CACbzB,IAAI,CAAC,UAAU,CACf0B,IAAI,CAAC,UAAU,CACfC,QAAQ,MACR1B,KAAK,CAAEX,WAAW,CAACG,QAAS,CAC5BmC,QAAQ,CAAE9B,YAAa,CACvBsB,SAAS,CAAC,0GAA0G,CACpHS,WAAW,CAAC,qBAAqB,CAClC,CAAC,EACC,CAAC,EACH,CAAC,cAENzC,KAAA,QAAKgC,SAAS,CAAC,mCAAmC,CAAAC,QAAA,eAChDjC,KAAA,QAAKgC,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eAChCnC,IAAA,UACEuC,EAAE,CAAC,aAAa,CAChBzB,IAAI,CAAC,aAAa,CAClB0B,IAAI,CAAC,UAAU,CACfN,SAAS,CAAC,yEAAyE,CACpF,CAAC,cACFlC,IAAA,UACEsC,OAAO,CAAC,aAAa,CACrBJ,SAAS,CAAC,kCAAkC,CAAAC,QAAA,CAC7C,aAED,CAAO,CAAC,EACL,CAAC,cAENnC,IAAA,QAAKkC,SAAS,CAAC,SAAS,CAAAC,QAAA,cACtBnC,IAAA,CAACX,IAAI,EACH+C,EAAE,CAAC,kBAAkB,CACrBF,SAAS,CAAC,qDAAqD,CAAAC,QAAA,CAChE,uBAED,CAAM,CAAC,CACJ,CAAC,EACH,CAAC,cAENnC,IAAA,CAACT,MAAM,EACLiD,IAAI,CAAC,QAAQ,CACbN,SAAS,CAAC,QAAQ,CAClBU,QAAQ,CAAEpC,OAAQ,CAClBA,OAAO,CAAEA,OAAQ,CAAA2B,QAAA,CAEhB3B,OAAO,CAAG,eAAe,CAAG,SAAS,CAChC,CAAC,EACL,CAAC,CACI,CAAC,CACV,CAAC,CACJ,CAAC,EACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAAL,KAAK","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}