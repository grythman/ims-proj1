{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Card,CardContent,CardDescription,CardHeader,CardTitle}from'../UI/Card';import{Button}from'../UI/Button';import{FileCheck,AlertCircle}from'lucide-react';import{toast}from'react-hot-toast';import studentApi from'../../services/studentApi';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const PreliminaryReportCheck=()=>{const[status,setStatus]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[submitting,setSubmitting]=useState(false);useEffect(()=>{const fetchStatus=async()=>{try{const data=await studentApi.reports.getPreliminaryStatus();setStatus(data.status);}catch(err){setError('Failed to load preliminary report status');toast.error('Failed to load preliminary report status');}finally{setLoading(false);}};fetchStatus();},[]);const handleSubmit=async()=>{setSubmitting(true);try{await studentApi.reports.submitPreliminary({// Add any necessary data here\n});toast.success('Preliminary report submitted successfully');// Refresh status\nconst newStatus=await studentApi.reports.getPreliminaryStatus();setStatus(newStatus.status);}catch(err){toast.error('Failed to submit preliminary report');}finally{setSubmitting(false);}};const getStatusColor=status=>{switch(status===null||status===void 0?void 0:status.toLowerCase()){case'approved':return'text-green-600 bg-green-100';case'pending':return'text-yellow-600 bg-yellow-100';case'rejected':return'text-red-600 bg-red-100';default:return'text-gray-600 bg-gray-100';}};return/*#__PURE__*/_jsxs(Card,{className:\"group relative overflow-hidden\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 bg-gradient-to-r from-blue-500/10 to-blue-500/5 opacity-0 transition-opacity group-hover:opacity-100\"}),/*#__PURE__*/_jsxs(CardHeader,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"rounded-lg bg-blue-500/10 p-2 w-fit\",children:/*#__PURE__*/_jsx(FileCheck,{className:\"h-6 w-6 text-blue-500\"})}),/*#__PURE__*/_jsx(CardTitle,{className:\"mt-4\",children:\"Preliminary Report Check\"}),/*#__PURE__*/_jsx(CardDescription,{children:\"Check and submit your preliminary report\"})]}),/*#__PURE__*/_jsx(CardContent,{children:loading?/*#__PURE__*/_jsxs(\"div\",{className:\"animate-pulse space-y-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"h-4 bg-gray-200 rounded w-1/4\"}),/*#__PURE__*/_jsx(\"div\",{className:\"h-4 bg-gray-200 rounded w-3/4\"})]}):error?/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2 text-red-500\",children:[/*#__PURE__*/_jsx(AlertCircle,{className:\"h-5 w-5\"}),/*#__PURE__*/_jsx(\"p\",{children:error})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-500\",children:\"Current Status\"}),/*#__PURE__*/_jsx(\"span\",{className:`px-2 py-1 rounded-full text-sm font-medium ${getStatusColor(status)}`,children:status||'Not Submitted'})]}),status!=='approved'&&/*#__PURE__*/_jsx(Button,{variant:\"secondary\",className:\"w-full bg-blue-500/10 hover:bg-blue-500/20 text-blue-500\",onClick:handleSubmit,disabled:submitting||status==='pending',loading:submitting,children:submitting?'Submitting...':'Submit Preliminary Report'}),status==='rejected'&&/*#__PURE__*/_jsx(\"div\",{className:\"p-3 bg-red-50 rounded-md\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-red-600\",children:\"Your preliminary report was rejected. Please review the feedback and submit again.\"})})]})})]});};export default PreliminaryReportCheck;","map":{"version":3,"names":["React","useState","useEffect","Card","CardContent","CardDescription","CardHeader","CardTitle","Button","FileCheck","AlertCircle","toast","studentApi","jsx","_jsx","jsxs","_jsxs","PreliminaryReportCheck","status","setStatus","loading","setLoading","error","setError","submitting","setSubmitting","fetchStatus","data","reports","getPreliminaryStatus","err","handleSubmit","submitPreliminary","success","newStatus","getStatusColor","toLowerCase","className","children","variant","onClick","disabled"],"sources":["C:/Users/Admin/ims-proj/frontend/src/components/student/PreliminaryReportCheck.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '../UI/Card'\nimport { Button } from '../UI/Button'\nimport { FileCheck, AlertCircle } from 'lucide-react'\nimport { toast } from 'react-hot-toast'\nimport studentApi from '../../services/studentApi'\n\nconst PreliminaryReportCheck = () => {\n  const [status, setStatus] = useState(null)\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState(null)\n  const [submitting, setSubmitting] = useState(false)\n\n  useEffect(() => {\n    const fetchStatus = async () => {\n      try {\n        const data = await studentApi.reports.getPreliminaryStatus()\n        setStatus(data.status)\n      } catch (err) {\n        setError('Failed to load preliminary report status')\n        toast.error('Failed to load preliminary report status')\n      } finally {\n        setLoading(false)\n      }\n    }\n\n    fetchStatus()\n  }, [])\n\n  const handleSubmit = async () => {\n    setSubmitting(true)\n    try {\n      await studentApi.reports.submitPreliminary({\n        // Add any necessary data here\n      })\n      toast.success('Preliminary report submitted successfully')\n      // Refresh status\n      const newStatus = await studentApi.reports.getPreliminaryStatus()\n      setStatus(newStatus.status)\n    } catch (err) {\n      toast.error('Failed to submit preliminary report')\n    } finally {\n      setSubmitting(false)\n    }\n  }\n\n  const getStatusColor = (status) => {\n    switch (status?.toLowerCase()) {\n      case 'approved':\n        return 'text-green-600 bg-green-100'\n      case 'pending':\n        return 'text-yellow-600 bg-yellow-100'\n      case 'rejected':\n        return 'text-red-600 bg-red-100'\n      default:\n        return 'text-gray-600 bg-gray-100'\n    }\n  }\n\n  return (\n    <Card className=\"group relative overflow-hidden\">\n      <div className=\"absolute inset-0 bg-gradient-to-r from-blue-500/10 to-blue-500/5 opacity-0 transition-opacity group-hover:opacity-100\" />\n      <CardHeader>\n        <div className=\"rounded-lg bg-blue-500/10 p-2 w-fit\">\n          <FileCheck className=\"h-6 w-6 text-blue-500\" />\n        </div>\n        <CardTitle className=\"mt-4\">Preliminary Report Check</CardTitle>\n        <CardDescription>Check and submit your preliminary report</CardDescription>\n      </CardHeader>\n      <CardContent>\n        {loading ? (\n          <div className=\"animate-pulse space-y-4\">\n            <div className=\"h-4 bg-gray-200 rounded w-1/4\"></div>\n            <div className=\"h-4 bg-gray-200 rounded w-3/4\"></div>\n          </div>\n        ) : error ? (\n          <div className=\"flex items-center space-x-2 text-red-500\">\n            <AlertCircle className=\"h-5 w-5\" />\n            <p>{error}</p>\n          </div>\n        ) : (\n          <div className=\"space-y-4\">\n            <div className=\"flex items-center justify-between\">\n              <span className=\"text-sm text-gray-500\">Current Status</span>\n              <span className={`px-2 py-1 rounded-full text-sm font-medium ${getStatusColor(status)}`}>\n                {status || 'Not Submitted'}\n              </span>\n            </div>\n\n            {status !== 'approved' && (\n              <Button\n                variant=\"secondary\"\n                className=\"w-full bg-blue-500/10 hover:bg-blue-500/20 text-blue-500\"\n                onClick={handleSubmit}\n                disabled={submitting || status === 'pending'}\n                loading={submitting}\n              >\n                {submitting ? 'Submitting...' : 'Submit Preliminary Report'}\n              </Button>\n            )}\n\n            {status === 'rejected' && (\n              <div className=\"p-3 bg-red-50 rounded-md\">\n                <p className=\"text-sm text-red-600\">\n                  Your preliminary report was rejected. Please review the feedback and submit again.\n                </p>\n              </div>\n            )}\n          </div>\n        )}\n      </CardContent>\n    </Card>\n  )\n}\n\nexport default PreliminaryReportCheck"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}