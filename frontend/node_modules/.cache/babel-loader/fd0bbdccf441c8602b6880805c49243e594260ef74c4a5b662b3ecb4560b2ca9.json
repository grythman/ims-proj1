{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useAuth}from'../../context/AuthContext';import api from'../../services/api';import{UsersIcon,AcademicCapIcon,ClipboardDocumentListIcon,BellIcon}from'@heroicons/react/24/outline';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AdminDashboard=()=>{const[stats,setStats]=useState(null);const[recentActions,setRecentActions]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);useEffect(()=>{fetchAdminData();},[]);const fetchAdminData=async()=>{try{const[statsResponse,actionsResponse]=await Promise.all([api.get('/admin/dashboard-stats/'),api.get('/admin/recent-actions/')]);setStats(statsResponse.data);setRecentActions(actionsResponse.data);}catch(err){setError('Failed to fetch admin data');console.error('Error:',err);}finally{setLoading(false);}};const sendSystemMessage=async data=>{try{await api.post('/admin/system-message/',data);// Show success message\n}catch(err){// Show error message\n}};return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-white overflow-hidden shadow rounded-lg\",children:/*#__PURE__*/_jsx(\"div\",{className:\"p-5\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:/*#__PURE__*/_jsx(UsersIcon,{className:\"h-6 w-6 text-gray-400\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"ml-5 w-0 flex-1\",children:/*#__PURE__*/_jsxs(\"dl\",{children:[/*#__PURE__*/_jsx(\"dt\",{className:\"text-sm font-medium text-gray-500 truncate\",children:\"Total Users\"}),/*#__PURE__*/_jsx(\"dd\",{className:\"text-lg font-medium text-gray-900\",children:(stats===null||stats===void 0?void 0:stats.total_users)||0})]})})]})})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white shadow rounded-lg\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"px-4 py-5 sm:px-6\",children:/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg leading-6 font-medium text-gray-900\",children:\"Recent Actions\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"border-t border-gray-200\",children:/*#__PURE__*/_jsx(\"ul\",{className:\"divide-y divide-gray-200\",children:recentActions.map((action,index)=>/*#__PURE__*/_jsx(\"li\",{className:\"px-4 py-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-900\",children:action.user}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-500\",children:[action.action,\" - \",action.object]})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:new Date(action.time).toLocaleString()})]})},index))})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white shadow rounded-lg p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"Send System Message\"}),/*#__PURE__*/_jsx(\"form\",{onSubmit:e=>{e.preventDefault();const formData=new FormData(e.target);sendSystemMessage({title:formData.get('title'),message:formData.get('message'),recipients:formData.getAll('recipients')});},children:/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Title\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"title\",className:\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Message\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"message\",rows:4,className:\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Recipients\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-2 space-y-2\",children:['student','mentor','teacher'].map(type=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:\"recipients\",value:type,className:\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"}),/*#__PURE__*/_jsxs(\"label\",{className:\"ml-2 text-sm text-gray-700\",children:[type.charAt(0).toUpperCase()+type.slice(1),\"s\"]})]},type))})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-end\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\",children:\"Send Message\"})})]})})]})]});};export default AdminDashboard;","map":{"version":3,"names":["React","useState","useEffect","useAuth","api","UsersIcon","AcademicCapIcon","ClipboardDocumentListIcon","BellIcon","jsx","_jsx","jsxs","_jsxs","AdminDashboard","stats","setStats","recentActions","setRecentActions","loading","setLoading","error","setError","fetchAdminData","statsResponse","actionsResponse","Promise","all","get","data","err","console","sendSystemMessage","post","className","children","total_users","map","action","index","user","object","Date","time","toLocaleString","onSubmit","e","preventDefault","formData","FormData","target","title","message","recipients","getAll","type","name","required","rows","value","charAt","toUpperCase","slice"],"sources":["C:/Users/Admin/ims-proj/frontend/src/pages/dashboard/AdminDashboard.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useAuth } from '../../context/AuthContext';\nimport api from '../../services/api';\nimport {\n    UsersIcon,\n    AcademicCapIcon,\n    ClipboardDocumentListIcon,\n    BellIcon\n} from '@heroicons/react/24/outline';\n\nconst AdminDashboard = () => {\n    const [stats, setStats] = useState(null);\n    const [recentActions, setRecentActions] = useState([]);\n    const [loading, setLoading] = useState(true);\n    const [error, setError] = useState(null);\n\n    useEffect(() => {\n        fetchAdminData();\n    }, []);\n\n    const fetchAdminData = async () => {\n        try {\n            const [statsResponse, actionsResponse] = await Promise.all([\n                api.get('/admin/dashboard-stats/'),\n                api.get('/admin/recent-actions/')\n            ]);\n            setStats(statsResponse.data);\n            setRecentActions(actionsResponse.data);\n        } catch (err) {\n            setError('Failed to fetch admin data');\n            console.error('Error:', err);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const sendSystemMessage = async (data) => {\n        try {\n            await api.post('/admin/system-message/', data);\n            // Show success message\n        } catch (err) {\n            // Show error message\n        }\n    };\n\n    return (\n        <div className=\"space-y-6\">\n            {/* Stats Overview */}\n            <div className=\"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4\">\n                <div className=\"bg-white overflow-hidden shadow rounded-lg\">\n                    <div className=\"p-5\">\n                        <div className=\"flex items-center\">\n                            <div className=\"flex-shrink-0\">\n                                <UsersIcon className=\"h-6 w-6 text-gray-400\" />\n                            </div>\n                            <div className=\"ml-5 w-0 flex-1\">\n                                <dl>\n                                    <dt className=\"text-sm font-medium text-gray-500 truncate\">\n                                        Total Users\n                                    </dt>\n                                    <dd className=\"text-lg font-medium text-gray-900\">\n                                        {stats?.total_users || 0}\n                                    </dd>\n                                </dl>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                {/* Add more stat cards */}\n            </div>\n\n            {/* Recent Actions */}\n            <div className=\"bg-white shadow rounded-lg\">\n                <div className=\"px-4 py-5 sm:px-6\">\n                    <h3 className=\"text-lg leading-6 font-medium text-gray-900\">\n                        Recent Actions\n                    </h3>\n                </div>\n                <div className=\"border-t border-gray-200\">\n                    <ul className=\"divide-y divide-gray-200\">\n                        {recentActions.map((action, index) => (\n                            <li key={index} className=\"px-4 py-4\">\n                                <div className=\"flex items-center justify-between\">\n                                    <div>\n                                        <p className=\"text-sm font-medium text-gray-900\">\n                                            {action.user}\n                                        </p>\n                                        <p className=\"text-sm text-gray-500\">\n                                            {action.action} - {action.object}\n                                        </p>\n                                    </div>\n                                    <p className=\"text-sm text-gray-500\">\n                                        {new Date(action.time).toLocaleString()}\n                                    </p>\n                                </div>\n                            </li>\n                        ))}\n                    </ul>\n                </div>\n            </div>\n\n            {/* System Message Form */}\n            <div className=\"bg-white shadow rounded-lg p-6\">\n                <h3 className=\"text-lg font-medium text-gray-900 mb-4\">\n                    Send System Message\n                </h3>\n                <form onSubmit={(e) => {\n                    e.preventDefault();\n                    const formData = new FormData(e.target);\n                    sendSystemMessage({\n                        title: formData.get('title'),\n                        message: formData.get('message'),\n                        recipients: formData.getAll('recipients')\n                    });\n                }}>\n                    <div className=\"space-y-4\">\n                        <div>\n                            <label className=\"block text-sm font-medium text-gray-700\">\n                                Title\n                            </label>\n                            <input\n                                type=\"text\"\n                                name=\"title\"\n                                className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500\"\n                                required\n                            />\n                        </div>\n                        <div>\n                            <label className=\"block text-sm font-medium text-gray-700\">\n                                Message\n                            </label>\n                            <textarea\n                                name=\"message\"\n                                rows={4}\n                                className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500\"\n                                required\n                            />\n                        </div>\n                        <div>\n                            <label className=\"block text-sm font-medium text-gray-700\">\n                                Recipients\n                            </label>\n                            <div className=\"mt-2 space-y-2\">\n                                {['student', 'mentor', 'teacher'].map(type => (\n                                    <div key={type} className=\"flex items-center\">\n                                        <input\n                                            type=\"checkbox\"\n                                            name=\"recipients\"\n                                            value={type}\n                                            className=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\n                                        />\n                                        <label className=\"ml-2 text-sm text-gray-700\">\n                                            {type.charAt(0).toUpperCase() + type.slice(1)}s\n                                        </label>\n                                    </div>\n                                ))}\n                            </div>\n                        </div>\n                        <div className=\"flex justify-end\">\n                            <button\n                                type=\"submit\"\n                                className=\"px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\n                            >\n                                Send Message\n                            </button>\n                        </div>\n                    </div>\n                </form>\n            </div>\n        </div>\n    );\n};\n\nexport default AdminDashboard; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}