{"ast":null,"code":"import axios from'axios';const api=axios.create({baseURL:process.env.REACT_APP_API_URL||'http://localhost:8000',headers:{'Content-Type':'application/json'},withCredentials:true});export const login=async(username,password)=>{try{const response=await api.post('/api/users/login/',{username,password});if(response.data.access){localStorage.setItem('token',response.data.access);}return response.data;}catch(error){var _error$response;console.error('Login API error:',((_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.data)||error.message);throw error;}};// Define and export the getMe function\nexport const getMe=async()=>{const response=await api.get('/api/users/me/');return response.data;};// Define and export the register function\nexport const register=async userData=>{const response=await api.post('/api/users/register/',userData);return response.data;};export const forgotPassword=async email=>{try{const response=await api.post('/api/users/password-reset/',{email});return response.data;}catch(error){var _error$response2;console.error('Password reset error:',((_error$response2=error.response)===null||_error$response2===void 0?void 0:_error$response2.data)||error.message);throw error;}};export const resetPassword=async(token,password)=>{try{const response=await api.post('/api/users/password-reset/confirm/',{token,password});return response.data;}catch(error){var _error$response3;console.error('Password reset confirm error:',((_error$response3=error.response)===null||_error$response3===void 0?void 0:_error$response3.data)||error.message);throw error;}};// Request interceptor\napi.interceptors.request.use(config=>{const token=localStorage.getItem('token');if(token){config.headers.Authorization=`Bearer ${token}`;}return config;},error=>Promise.reject(error));// Response interceptor\napi.interceptors.response.use(response=>response,async error=>{var _error$response4;console.error('API Error:',((_error$response4=error.response)===null||_error$response4===void 0?void 0:_error$response4.data)||error.message);return Promise.reject(error);});export default api;","map":{"version":3,"names":["axios","api","create","baseURL","process","env","REACT_APP_API_URL","headers","withCredentials","login","username","password","response","post","data","access","localStorage","setItem","error","_error$response","console","message","getMe","get","register","userData","forgotPassword","email","_error$response2","resetPassword","token","_error$response3","interceptors","request","use","config","getItem","Authorization","Promise","reject","_error$response4"],"sources":["C:/Users/Admin/ims-proj/frontend/src/services/api.js"],"sourcesContent":["import axios from 'axios';\n\nconst api = axios.create({\n    baseURL: process.env.REACT_APP_API_URL || 'http://localhost:8000',\n    headers: {\n        'Content-Type': 'application/json',\n    },\n    withCredentials: true,\n});\n\nexport const login = async (username, password) => {\n    try {\n        const response = await api.post('/api/users/login/', {\n            username,\n            password\n        });\n        \n        if (response.data.access) {\n            localStorage.setItem('token', response.data.access);\n        }\n        \n        return response.data;\n    } catch (error) {\n        console.error('Login API error:', error.response?.data || error.message);\n        throw error;\n    }\n};\n\n// Define and export the getMe function\nexport const getMe = async () => {\n    const response = await api.get('/api/users/me/');\n    return response.data;\n};\n\n// Define and export the register function\nexport const register = async (userData) => {\n    const response = await api.post('/api/users/register/', userData);\n    return response.data;\n};\n\nexport const forgotPassword = async (email) => {\n    try {\n        const response = await api.post('/api/users/password-reset/', { email });\n        return response.data;\n    } catch (error) {\n        console.error('Password reset error:', error.response?.data || error.message);\n        throw error;\n    }\n};\n\nexport const resetPassword = async (token, password) => {\n    try {\n        const response = await api.post('/api/users/password-reset/confirm/', {\n            token,\n            password\n        });\n        return response.data;\n    } catch (error) {\n        console.error('Password reset confirm error:', error.response?.data || error.message);\n        throw error;\n    }\n};\n\n// Request interceptor\napi.interceptors.request.use(\n    (config) => {\n        const token = localStorage.getItem('token');\n        if (token) {\n            config.headers.Authorization = `Bearer ${token}`;\n        }\n        return config;\n    },\n    (error) => Promise.reject(error)\n);\n\n// Response interceptor\napi.interceptors.response.use(\n    (response) => response,\n    async (error) => {\n        console.error('API Error:', error.response?.data || error.message);\n        return Promise.reject(error);\n    }\n);\n\nexport default api;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}